<% if @user.blank? %>
<% url = admin_receipts_path %>
<%= form_tag url, method: "get", id: "receipt_search_form" do %>
  <div class="form-group">
    <%= label_tag "", 'Filters', class: "control-label" %>
    <%= submit_tag :Apply, class: "btn btn-primary btn-sm float-right pink-btn" %>
  </div>
  <div class="clearfix"></div>
  <hr/>
  <div class="form-group">
    <%= label_tag "fltrs", "Customer Name / Email / Phone", class: "control-label" %>
    <%
      if params[:fltrs].present? && params[:fltrs][:user_id].present?
        user = User.find(params[:fltrs][:user_id])
      end
    %>
    <%= select_tag "fltrs[user_id]", options_for_select((params[:fltrs].present? && params[:fltrs][:user_id].present?) ? [[user.ds_name, user.id]] : []), {class: "selectize-remote", data: {params: {fltrs: {role: "user"}}, url: admin_users_path }} %>
  </div>
  <div class="form-group">
    <%= label_tag "fltrs", "status", class: "control-label" %>
    <%= select_tag "fltrs[status]", options_for_select(Receipt.available_statuses.collect{|x| [x[:text], x[:id]]}, (params[:fltrs].present? ? params[:fltrs][:status] : "")), {prompt: "Select", class: "selectize"} %>
  </div>
  <div class="form-group">
    <%= label_tag "fltrs", "payment_mode", class: "control-label" %>
    <%= select_tag "fltrs[payment_mode]", options_for_select(Receipt.available_payment_modes.collect{|x| [x[:text], x[:id]]}, (params[:fltrs].present? ? params[:fltrs][:payment_mode] : "")), {prompt: "Select", class: "selectize"} %>
  </div>
  <div class="form-group">
    <%= label_tag "fltrs", "payment_type", class: "control-label" %>
    <%= select_tag "fltrs[payment_type]", options_for_select(Receipt.available_payment_types.collect{|x| [x[:text], x[:id]]}, (params[:fltrs].present? ? params[:fltrs][:payment_type] : "")), {prompt: "Select", class: "selectize"} %>
  </div>
<% end %>
<%= javascript_tag do %>
  $(document).ready(function(){
    FormInitializer.init($("#receipt_search_form"));
  });
<% end %>

<% end %>
