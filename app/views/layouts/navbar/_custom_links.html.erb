<% links = [] %>

<% if CustomPolicy.custom_methods.present? %>
  <% CustomPolicy.custom_methods.each do |method| %>
    <% if policy(:custom).send("#{method}?") %>
        <% links << { method: method.to_s.titleize, link: eval("custom_#{method}_path"), name: t("controller.#{method}.index.link_name")} %>
      </li>
    <% end %>
  <% end %>
<% end %>

<% if links.present? %>
  <li class="nav-item d-none d-lg-block accordion">
                <div class="accordion-item bg-menu rounded-none border-0 dropdown">
      <%= active_link_to t('global.custom'), "javascript:;", active: [CustomPolicy.custom_methods.map{|x| 'admin/'+x}, ['index']], class: "nav-link dropdown-toggle", data: {toggle: 'dropdown'},  id: "dropdownMenuLeft3", "data-bs-toggle": "collapse", "data-bs-target":"#dashboardMore", "aria-expanded": "false" %>
      <div id="dashboardMore" class="accordion-collapse collapse" aria-labelledby="dropdownMenuLeft3">
        <% links.each do |link| %>
          <%= active_link_to link[:name], link[:link] %>
        <% end %>
      </div>
    </div>
  </li>
<% end %>

<% if links.present? %>
  <% links.each do |link| %>
    <li class="nav-item d-lg-none">
      <%= active_link_to link[:name], link[:link], active: :inclusive, class: "nav-link" %>
    </li>
  <% end %>
<% end %>
<% if current_client.terms_and_conditions.present? %>
  <li class='nav-item d-lg-none'>
    <%= link_to 'T & C', dashboard_terms_and_condition_path, active: :exclusive, class: 'nav-link pl-0 pr-0', target: "_blank" %>
  </li>
<% end %>
