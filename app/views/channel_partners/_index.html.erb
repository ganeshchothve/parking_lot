<section class="mt-0">
  <div class="px-0">
    <div class="row g-0">
      <div class="col-lg-12 p-0">
        <% channel_partners.each do |channel_partner| %>
        <div class="white rounded-3 float-start wd-100 mt-4 shadow-sm position-relative">
          <div class="float-start wd-100">
            <div class="d-flex justify-content-between">
              <div>
                <div class="inner-info">
                  <div class="text-center float-start letter-sort-nm bg-primary-light">
                    <span class="position-absolute top-50 start-50 translate-middle primary fn-24 font-medium">SM</span>
                  </div>
                  <div class="ps-3 py-3 float-start">
                    <h2 class="fn-18 font-normal">
                      <span class="col-title"><%= channel_partner.name %></span>
                      <% if channel_partner.cp_code.present? %>
                        <div class='small'>
                          <span class="title"><%= t('mongoid.attributes.channel_partner.cp_code') %>:</span> <%= channel_partner.cp_code %>
                        </div>
                      <% end %>
                    </h2>
                    <p class="fn-14 mt-1 mb-1">
                      <i class="fa fa-envelope fill-theme-light me-2"></i>
                      <%= channel_partner.email %>
                    </p>
                    <p class="fn-14 mt-1 mb-0">
                      <i class="fa fa-phone-alt fill-theme-light me-2"></i>
                      <%= channel_partner.phone %>
                    </p>
                  </div>
                </div>
              </div>
              <div>
                <div class="row ht-inner-col-150">
                  <div class="col border-start py-3 px-3 wd-150 position-relative">
                    <div class="position-absolute top-50 start-50 translate-middle w-75">
                      <p class="font-medium fn-14 mb-0"><%= channel_partner.rera_id %></p>
                      <p class="fn-12 mb-0"><%= t('mongoid.attributes.channel_partner.rera_id') %></p>
                    </div>
                  </div>

                  <div class="col border-start py-3 px-3 wd-150 position-relative">
                    <div class="position-absolute top-50 start-50 translate-middle w-75">
                      <p class="font-medium fn-14 mb-0">
                        <i class="fa fa-circle fill-success me-2 fa-xs"></i>
                        <%= ChannelPartner.human_attribute_name("status.#{channel_partner.status}") %>
                      </p>
                      <p class="fn-12 mb-0 ms-4"><%= t('mongoid.attributes.channel_partner.status') %></p>
                    </div>
                  </div>

                  <div class="col border-start py-3 px-3 wd-150 position-relative">
                    <div class="position-absolute top-50 start-50 translate-middle w-75">
                      <p class="font-medium fn-14 mb-0">
                        <%= channel_partner.associated_user_id.present? ? link_to(channel_partner.associated_user.name, admin_user_path(channel_partner.associated_user_id), class: "primary col-title") : '-' %>
                      </p>
                      <p class="fn-12 mb-0"><%= t('mongoid.attributes.channel_partner.associated_user_id') %></p>
                    </div>
                  </div>
                  
                </div>
              </div>
            </div>
          </div>
          <div class="position-absolute custom-top-10 custom-end-20">
            <div class="dropdown">
              <a href="javascript:void(0);" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <i class="fa fa-ellipsis-v primary" aria-hidden="true"></i></a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                <% if Admin::ChannelPartnerPolicy.new(current_user, channel_partner).edit? %>
                  <%= link_to t('helpers.edit.link_name', model: ChannelPartner.model_name.human), edit_channel_partner_path(channel_partner), class: 'dropdown-item modal-remote-form-link' %>
                <% end %>
                <%# if policy([:admin, Crm::Base.new()]).choose_crm? && Crm::Api.where(resource_class: 'ChannelPartner').present? %>
                  <%#= link_to t('controller.crms.choose_crm.link_name'), choose_crm_admin_crm_base_index_path(resource_id: channel_partner.id, resource_class: channel_partner.class), class: "dropdown-item " %>
                <%# end %>

                <% if Admin::ChannelPartnerPolicy.new(current_user, channel_partner).show? %>
                  <%= link_to t('helpers.show.link_name', model: ChannelPartner.model_name.human), channel_partner, class: 'dropdown-item' %>
                <% end %>
                <% if policy([ current_user_role_group, Asset.new(assetable: channel_partner)]).index? %>
                  <%= link_to t('controller.assets.index.link_name'), assetables_path(assetable_type: channel_partner.class.model_name.i18n_key.to_s, assetable_id: channel_partner.id), class: 'dropdown-item modal-remote-form-link' %>
                <% end %>
              </div>
            </div>
          </div>
        </div>

        <% end %>
      </div>

      <!----------- Pagination ---------->
      <div class="col-lg-12 py-3 white mb-2 px-3 mt-3 shadow-sm">
        <div class="row">
          <div class="col-lg-6 pt-2">
            <p class="table-entry mb-0">Showing 1 - 5 of <%= @channel_partners.total_entries %> items</p>
          </div>
          <div class="col-lg-6 table-pagination">
            <%= will_paginate channel_partners, list_classes: %w(pagination justify-content-end) %>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>