<div class="row">
  <div class="col-md-12">
    <%
        if @channel_partner_id.blank?
          cp_name = [[params.dig(:channel_partner, :company_name), params.dig(:channel_partner, :company_name)]]
        else
          cp = ChannelPartner.where(id: @channel_partner_id).first
          cp_name = [[cp.ds_name, cp.id]] if cp
        end
     %>
    <%= form.input :company_name, collection: cp_name || [[]], required: true, as: :select, prompt: :translate, disabled: !policy([:admin, @channel_partner]).editable_field?("company_name"), input_html: { class: 'selectize-remote', data: {url: channel_partners_path, create: true, ds: true} } %>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <%= form.input :first_name, required: true, autofocus: true, disabled: !policy([:admin, @channel_partner]).editable_field?("first_name") %>
  </div>
  <div class="col-md-6">
    <%= form.input :last_name, required: true, autofocus: true, disabled: !policy([:admin, @channel_partner]).editable_field?("last_name") %>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <%= form.input :phone, required: true, disabled: !policy([:admin, @channel_partner]).editable_field?("phone"), as: :tel, input_html: { class: 'phone' } %>
  </div>
  <div class="col-md-6">
    <%= form.input :email, required: true, disabled: !policy([:admin, @channel_partner]).editable_field?("email"), input_html: { class: 'email'} %>
  </div>
</div>

<div class='row'>
  <div class="col-md-12">
    <%= form.input :interested_services, collection: ChannelPartner::SERVICES.collect{|x| [x, x]}, disabled: !policy([:admin, @channel_partner]).editable_field?("interested_services"), prompt: :translate, required: true, input_html: {multiple: true, class: 'selectize'} %>
  </div>
</div>

<div class='row'>
  <div class="col-md-12">
    <%= form.input :regions, collection: current_client.partner_regions.collect{|region| [region,region]}, disabled: !policy([:admin, @channel_partner]).editable_field?("regions"), prompt: :translate, required: true, input_html: {multiple: true, class: 'selectize'} %>
  </div>
</div>
<div class="row">
    <div class="col-md-12">
      <%= form.input :referral_code, disabled: !policy([:admin, @channel_partner]).editable_field?("referral_code") %>
    </div>
</div>
<div class="row">
  <div class="col-md-6">
    <%= form.input :rera_applicable, item_wrapper_class: 'form-check form-check-inline', as: :radio_buttons, prompt: :translate, required: true, input_html: { disabled: !policy([:admin, @channel_partner]).editable_field?("rera_applicable") } %>
  </div>
  <div class="col-md-6">
    <%= form.input :rera_id, disabled: !policy([:admin, @channel_partner]).editable_field?("rera_id") %>
  </div>
  <% if params[:manager_id].present? %>
    <%= form.hidden_field :manager_id, value: params[:manager_id] %>
  <% end %>
</div>
