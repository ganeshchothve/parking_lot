<div class="table-responsive">
  <table class='table striped-table payment-breakup' width="100%" cellpadding="10" cellspacing="0">
    <thead class="th-default">
      <tr>
        <% unless current_user.buyer? %>
          <th>To</th>
        <% end %>
        <td> Content </td>
        <th> Status</th>
        <th> Sent On</th>
        <th class="text-right">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @smses.each do |sms| %>
        <tr>
          <% unless current_user.buyer? %>
            <td>
              <% sms.to.each do |s| %>
                <%= link_to s,"javascript:;", data: {toggle: "modal", target: "#sms_show"} %>
              <% end %>
            </td>
          <% end %>
          <td><%= truncate(sms.body, length: 30, separator: '') %></td>
          <td>
            <%= t("smses.status.#{sms.status}") %>
          </td>
          <td>
            <%= sms.sent_on.try(:strftime, '%b %e, %Y, %l:%M %p') || '-' %>
            <div class="modal fade right fixed-header-footer" role="dialog" id="sms_show">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <div class="modal-title">SMS</div>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <% @sms = Sms.find(sms.id) %>
                    <%=render "admin/smses/show",{sms: @sms} %>
                  </div>
                </div>
              </div>
            </div>
          </td>
          <td class="text-right">
            <div class="dropdown">
              <a class="btn btn-light dropdown-toggle" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a>
              <div class="dropdown-menu dropdown-menu-right">
                <%= link_to 'Show', "javascript:;", data: {toggle: "modal", target: "#sms_show"}, class: 'dropdown-item' %>
              </div>
            </div>
          </td>
        </tr>
      <% end %>
      <tr>
        <td colspan="4">
          <div class="mt-5 pt-5"></div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<%= will_paginate @smses, list_classes: %w(pagination justify-content-center) %>

