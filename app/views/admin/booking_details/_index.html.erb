<section class="mt-0">
  <div class="px-0">
    <div class="row g-0">
      <div class="col-lg-12 p-0 mt-3 table-responsive">
        <table class="table table-responsive table-color align-middle">
          <thead>
            <tr>
              <% unless current_user.buyer? %>
                <th>Name</th>
              <% end %>
              <th>Booking Details</th>
              <th>Status</th>
              <th>Approval Status</th>
              <th>Booked On</th>
              <th>Agreement Date</th>
              <th><%= BookingDetail.human_attribute_name('closing_manager') %></th>
              <th class="btn-action">Action</th>
            </tr>
          </thead>
          <tbody>
            <% booking_details.each do |booking_detail| %>
              <tr>
                <% unless current_user.buyer? %>
                  <td><%= link_to booking_detail.lead.name, admin_booking_detail_path(booking_detail) %></td>
                <% end %>
                <td><%= booking_detail.project.name ? booking_detail.project.name : '-' %> | <%= booking_detail.project_tower_name ? booking_detail.project_tower_name : '-' %> | <%= booking_detail.name ? booking_detail.name : '-' %></td>
                <td>
                  <span class="font-small fn-14 mb-0 theme-txt-color mb-0"><i
                        class='fa fa-circle status_<%= BookingDetail.human_attribute_name("status.#{booking_detail.status}").downcase.gsub(' ', '_') %>  me-2 fa-sm'></i><%= BookingDetail.human_attribute_name("status.#{booking_detail.status}") %>
                  </span>
                </td>
                <td>
                  <%# if booking_detail.blocked? %>
                  <span class="font-small fn-14 mb-0 theme-txt-color mb-0"><i
                        class='fa fa-circle status_<%= BookingDetail.human_attribute_name("status.#{booking_detail.approval_status}").downcase.gsub(' ', '_') %>  me-2 fa-sm'></i><%= I18n.t("mongoid.attributes.booking_detail/approval_status.#{booking_detail.approval_status}") %>
                  </span>
                  <%# end %>
                </td>
                <td>
                  <%= booking_detail.booked_on ? I18n.l(booking_detail.booked_on) : '-' %>
                </td>
                <td>
                  <%= booking_detail.agreement_date ? I18n.l(booking_detail.agreement_date) : '-' %>
                </td>
                <td>
                  <%= booking_detail.try(:creator).try(:role).in?(User::BUYER_ROLES) ? "-" : booking_detail.try(:creator).try(:name) %>
                </td>
                <td>
                  <div class="dropdown">
                    <a href="javascript:void(0);" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right fix-dropdown-menu" aria-labelledby="dropdownMenuLink">
                      <% if booking_detail.project_unit.present? %>
                        <%= render "#{current_user_role_group}/booking_details/links", booking_detail: booking_detail, link_name: '' %>
                      <% else %>
                        <%= render "#{current_user_role_group}/booking_details/booking_without_inventory_links", booking_detail: booking_detail, link_name: '' %>
                      <% end %>
                    </div>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <!----------- Pagination ---------->
      <div class="col-lg-12 p-3">
        <div class="row">
          <div class="col-lg-6 pt-2">
            <p class="table-entry mb-0"><%= page_entries_info @booking_details %></p>
          </div>
          <div class="col-lg-6 table-pagination">
            <%= will_paginate @booking_details, list_classes: %w(pagination justify-content-end) %>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
