<div class="table-responsive">
  <table class='striped-table table' width="100%" cellpadding="0" cellspacing="0">
    <thead class="th-default">
      <% labels = t('mongoid.attributes.project_unit').with_indifferent_access %>
      <tr>
        <th><%= labels[:name] %></th>
        <th><%= labels[:bedrooms] %> / <%= labels[:bathrooms] %></th>
        <th><%= labels[:status] %></th>
        <th><%= labels[:agreement_price] %></th>
        <th class="text-right">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% project_units = ProjectUnit.in(_id: booking_details.pluck(:project_unit_id)).group_by(&:_id) %>
      <% booking_details.each do |booking_detail| %>
        <% project_unit = project_units[booking_detail.project_unit_id].first %>
        <tr>
          <td>
            <%= project_unit.name %>
            <div class="small">Project: <%= project_unit.project_name %></div>
            <div class="small">Tower: <%= project_unit.project_tower_name %></div>
          </td>
          <td><%= project_unit.bedrooms %> / <%= project_unit.bathrooms %></td>
          <td><%= t("booking_details.status.#{booking_detail.status}") %></td>
          <td>
            <%= number_to_indian_currency(project_unit.calculate_agreement_price.round) %>
            <div class="small"><%= labels[:all_inclusive_price] %>: <%= number_to_indian_currency(project_unit.calculate_all_inclusive_price.round) %></div>
            <div class="small">Paid Amt.: <%= number_to_indian_currency(booking_detail.total_amount_paid)  %></div>
            <div class="small">Booking Amt. Pending: <%= number_to_indian_currency(booking_detail.pending_balance.to_i) %></div>
          </td>
          <td class="text-right">
            <%= render "#{current_user_role_group}/booking_details/links", booking_detail: booking_detail, link_name: '' %>
          </td>
        </tr>
      <% end %>
      <tr>
        <td colspan="5">
          <div class="mt-5 pt-5"></div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<%= will_paginate booking_details, list_classes: %w(pagination justify-content-center) %>
