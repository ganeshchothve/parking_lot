<table class='table table-responsive table-color'>
  <thead>
    <thead>
      <tr class="bg-primary white">
        <th><%= t('mongoid.attributes.user_kyc.name') %></th>
        <% if current_client.enable_leads? %>
          <th><%= t('mongoid.attributes.user_kyc.lead_id') %></th>
        <% end %>
        <th><%= "#{ t('mongoid.attributes.user_kyc.email')}" %></th>
        <th><%= "#{ t('mongoid.attributes.user_kyc.phone') }" %></th>
        <th><%= t('mongoid.attributes.user_kyc.dob') %></th>
        <th><%= t('mongoid.attributes.user_kyc.pan_number') %></th>
        <th class="btn-action">Action</th>
      </tr>
    </thead>
  </thead>
  <tbody>
    <% user_kycs.each do |user_kyc| %>
      <tr>
        <td data-title=<%= t('mongoid.attributes.user_kyc.name') %> ><%= user_kyc.name %></td>
        <% if current_client.enable_leads? %>
          <td data-title=<%= t('mongoid.attributes.user_kyc.lead_id') %> >
            <% if policy([:admin, User.new]).show? %>
              <%= link_to user_kyc.lead.name, admin_lead_path(user_kyc.lead_id) %>
            <% else %>
              <%= user_kyc.lead.name %>
            <% end %>
          </td>
        <% end %>
        <td  data-title= <%= "#{t('mongoid.attributes.user_kyc.email')}" %> >
          <%= user_kyc.masked_email(current_user) %>
        </td>
        <td  data-title= <%= "#{t('mongoid.attributes.user_kyc.phone')}" %> >
          <%= user_kyc.masked_phone(current_user) %>
        </td>
        <td data-title=<%= t('mongoid.attributes.user_kyc.dob') %> ><%= user_kyc.dob.strftime("%d %b %Y") rescue "" %></td>
        <td data-title=<%= t('mongoid.attributes.user_kyc.pan_number') %> ><%= user_kyc.pan_number %></td>
        <td>
          <div class="dropdown show text-right">
          <a class="" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-ellipsis-v txt-light-blue" aria-hidden="true"></i></a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
              <% if current_user.buyer? && Buyer::UserKycPolicy.new(current_user, user_kyc).edit? %>
                <%= link_to t('helpers.edit.link_name', model: UserKyc.model_name.human), edit_buyer_user_kyc_path(user_kyc), class: 'dropdown-item modal-remote-form-link', data:{event_category: 'Section', event_action: 'Click', event_name: 'Edit User KYC'} %>
              <% elsif Admin::UserKycPolicy.new(current_user, user_kyc).edit? %>
                <%= link_to t('helpers.edit.link_name', model: UserKyc.model_name.human), edit_admin_lead_user_kyc_path(user_kyc.lead, user_kyc), class: 'dropdown-item modal-remote-form-link', data:{event_category: 'Section', event_action: 'Click', event_name: 'Edit User KYC'} %>
              <% end %>
              <%# if policy([:admin, Crm::Base.new()]).choose_crm? && Crm::Api.where(resource_class: 'UserKyc').present? %>
                <%#= link_to t('controller.crms.choose_crm.link_name'), choose_crm_admin_crm_base_index_path(resource_id: user_kyc.id, resource_class: user_kyc.class), class: "dropdown-item " %>
              <%# end %>
              <% if policy([:admin, UserKyc.new]).show? %>
                <%= link_to t('helpers.show.link_name', model: UserKyc.model_name.human), admin_user_kyc_path(user_kyc), class: 'dropdown-item' %>
              <% end %>
              <% if policy([ current_user_role_group, Asset.new(assetable: user_kyc)]).index? %>
                <%= link_to t('controller.assets.index.link_name'), assetables_path(assetable_type: user_kyc.class.model_name.i18n_key.to_s, assetable_id: user_kyc.id), class: 'dropdown-item modal-remote-form-link' %>
              <% end %>
           </div>
        </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<div class="col-lg-12 py-3 white mb-2 px-2">
  <div class="row">
    <div class="col-lg-6">
      <p class="table-entry mb-0 ps-2 pt-2"><%= page_entries_info user_kycs %></p>
    </div>
    <div class="col-lg-6 table-pagination">
      <%= will_paginate user_kycs, list_classes: %w(pagination justify-content-end) %>
    </div>
  </div>
</div>
