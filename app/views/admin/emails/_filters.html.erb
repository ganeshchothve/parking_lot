<% labels = t('mongoid.attributes.email').with_indifferent_access %>
<div class="filter-inner">
  <div class="filter-header">
  <span class="title">Filter</span>
  <a href="javascript:;" class="close-filter-btn">&times;</a>
  </div>
  <%= form_tag url, method: "get", id: "email_search_form" do %>
    <div class="filter-content">
      <div class="row">
        <% unless current_user.buyer? %>
          <div class="form-group col-lg-6 col-xs-12 col-md-6 col-sm-12">
            <%= label_tag "fltrs[to]", t('mongoid.attributes.email.to'), class: "control-label" %>
            <%= select_tag "fltrs[to]", options_for_select(policy_scope([:admin, Email]).pluck(:to).flatten.uniq.each {|x| x}, (params[:fltrs].present? ? params[:fltrs][:to] : "")), {prompt: "Select Email", class: "selectize"} %>
          </div>
          <div class="form-group col-lg-6 col-xs-12 col-md-6 col-sm-12">
            <%= label_tag "fltrs[cc]", t('mongoid.attributes.email.cc'), class: "control-label" %>
            <%= select_tag "fltrs[cc]", options_for_select(policy_scope([:admin, Email]).pluck(:cc).flatten.uniq.each {|x| x}, (params[:fltrs].present? ? params[:fltrs][:cc] : "")), {prompt: "Select Email", class: "selectize"} %>
          </div>
        <% end %>
        <div class="form-group col-lg-6 col-xs-12 col-md-6 col-sm-12">
          <%= label_tag "fltrs[status]", t('mongoid.attributes.email.status'), class: "control-label" %>
          <%= select_tag "fltrs[status]", options_for_select(Email::STATUS.collect{|x| [ t("mongoid.attributes.email/status.#{x}"), x]}, (params[:fltrs].present? ? params[:fltrs][:status] : "")), {prompt: "Select Status", class: "selectize"} %>
        </div>
        <div class="form-group col-lg-6 col-xs-12 col-md-6 col-sm-12">
          <%= label_tag "fltrs", t('mongoid.attributes.email.sent_on'), class: "control-label" %>
          <%= text_field_tag "fltrs[sent_on]", (params[:fltrs].present? ? params[:fltrs][:sent_on] : ""), class: "form-control daterangefilter", data: {locale: {format: "DD/MM/YYYY"}, opens: "left", drops: "up"}, placeholder: 'dd/mm/yyyy - dd/mm/yyyy' %>
        </div>
        <div class="form-group col-lg-6 col-xs-12 col-md-6 col-sm-12">
          <%= label_tag "fltrs", t('mongoid.attributes.email.subject'), class: "control-label" %>
          <%= text_field_tag "fltrs[subject]", (params[:fltrs].present? ? params[:fltrs][:subject] : ""), {prompt: "Enter Subject", class: 'form-control'} %>
        </div>
        <div class="form-group col-lg-6 col-xs-12 col-md-6 col-sm-12">
          <%= label_tag "fltrs", t('mongoid.attributes.email.body'), class: "control-label" %>
          <%= text_field_tag "fltrs[body]", (params[:fltrs].present? ? params[:fltrs][:body] : ""), {prompt: "Enter Content", class: 'form-control'} %>
        </div>
      </div>
    </div>
    <div class="filter-footer">
      <%= submit_tag :Apply, class: "f-save-btn db-small-btn white bg-light-blue fn-500 float-right" %>
      <button type="button" class="f-cancel-btn db-small-btn light-blue bg-white fn-500 float-right">Cancel</button>
    </div>
  <% end %>
</div>
<%= javascript_tag do %>
  $(document).ready(function(){
    FormInitializer.init($("#email_search_form"));
  });
<% end %>
