<div class="offers">
  <% editable_offers = policy([:admin, project]).editable_field?("offers_attributes")%>
  <% if editable_offers %>
    <div class='text-right'>
      <%= f.link_to_add I18n.t("controller.projects.add_offer.link_name"), :offers, :data => { :target => ".offers" }, class: 'btn btn-secondary' %>
    </div>
  <% end %>
  <%= f.fields_for :offers do |sf|%>
    <%= sf.hidden_field :booking_portal_client_id, value: current_client.id %>
    <% if editable_offers %>
      <div class='pl-2 text-right'>
        <%= sf.link_to_remove icon("far", "times-circle") %>
      </div>
    <% end %>
    <div class="mb-3">
      <%= sf.label :category, class: 'label-required' %>
      <%= sf.select :category, I18n.t("mongoid.attributes.offer/categories").collect{|k,v| [v, k.to_s]}.sort{|x, y| x[0] <=> y[0]}, {prompt: I18n.t("global.select")}, class: "selectize", required: true, disabled: !editable_offers %>
    </div>
    <div class="mb-3">
      <%= sf.label :provided_by, class: 'label-required' %>
      <%= sf.select :provided_by, I18n.t("mongoid.attributes.offer/provided_by").collect{|k,v| [v, k.to_s]}.sort{|x, y| x[0] <=> y[0]}, {prompt: I18n.t("global.select")}, class: "selectize", required: true, disabled: !editable_offers %>
    </div>
    <div class="mb-3">
      <%= sf.label :short_description, class: 'label-required' %>
      <%= sf.text_field :short_description, class:'form-control', required: 'required', disabled: !editable_offers %>
    </div>
    <div class="mb-3">
      <%= sf.label :description, class: 'label-required' %>
      <%= sf.text_area :description, class:'form-control summernote', required: 'required', disabled: !editable_offers %>
    </div>
  <% end %>
  <hr>
</div>