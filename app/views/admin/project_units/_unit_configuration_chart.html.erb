<canvas id="barChart2" height="300" class="pl-3 pr-3"></canvas>
<%= javascript_tag do %>
  var canvas = document.getElementById("barChart2");
  var ctx = canvas.getContext('2d');

  // Global Options:
   Chart.defaults.global.defaultFontColor = 'dodgerblue';
   Chart.defaults.global.defaultFontSize = 10;

  // Data with datasets options
  var data = {
      labels: <%= ProjectTower.distinct(:name).to_json.html_safe %>,
      datasets: <%= @dataset.to_json.html_safe %>
  };

  var options = {
          tooltips: {
            mode: 'point',
            intersect: true,
            callbacks: {
                label: function(tooltipItem, data) {
                    var label = data.datasets[tooltipItem.datasetIndex].label || '';
                    var item = Math.abs(tooltipItem.value)
                    return label + " : " + item;
                }
            }
          },
          responsive: true,
          scales: {
            xAxes: [{
              stacked: true,
              scaleLabel: {
                display: true,
                labelString: 'Project Towers'
              }
            }],
            yAxes: [{
              stacked: true,
              scaleLabel: {
                display: true,
                labelString: 'Count' 
              },
              afterTickToLabelConversion : function(q){
                for(var tick in q.ticks){
                    q.ticks[tick] = Math.abs(q.ticks[tick]);
                }
              }
            }]
          }
        };
  // Chart declaration:
  var myBarChart = new Chart(ctx, {
      type: 'bar',
      data: data,
      options: options
  });
<% end %>