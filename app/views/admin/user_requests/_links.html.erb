<% if policy([ current_user_role_group, Asset.new(assetable: user_request)]).index? %>
  <%= link_to 'Documents', assetables_path(assetable_type: user_request.class.model_name.i18n_key.to_s, assetable_id: user_request.id), class: 'dropdown-item modal-remote-form-link' %>
<% end %>

<% if !current_user.buyer? && policy([:admin, user_request]).show? && !(params[:controller] == 'admin/user_requests' && params[:action] == 'show') %>
  <%= link_to 'Details', admin_user_request_path(request_type: user_request.class.model_name.element, id: user_request.id), class: 'dropdown-item' %>
<% end %>

<% unless (user_request.status == "resolved" || user_request.status == "rejected") %>
  <% if Buyer::UserRequestPolicy.new(current_user, user_request).edit? && current_user.buyer? %>
    <% url = edit_buyer_user_request_path(user_request, request_type: user_request.class.model_name.element) %>
  <% elsif Admin::UserRequestPolicy.new(current_user, user_request).edit? %>
    <% url = edit_admin_user_request_path(user_request, request_type: user_request.class.model_name.element) %>
  <% end %>
  <%= link_to 'Edit', url, class: 'modal-remote-form-link dropdown-item' %>
<% end %>
