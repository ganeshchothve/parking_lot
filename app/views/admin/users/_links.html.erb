<% if policy([:admin, BookingDetail.new(user: user, project_unit: ProjectUnit.new(status: 'available'))]).hold? %>
  <%= link_to "Choose #{global_labels[:project_unit]} & Add Booking", new_admin_user_search_path(user.id), class: "dropdown-item" %>
<% end %>
<% if policy([:admin, user]).confirm_user? %>
  <%= link_to"Confirm User", confirm_user_admin_user_path(user), method: :patch, 
  class: "dropdown-item" %>
<% end %>
<% hold_booking = user.booking_details.where(status: 'hold').first %>
<% if hold_booking.present? #&& policy([current_user_role_group, hold_booking]).block? %>
  <%= link_to "Checkout using unit already held", checkout_user_search_path(user.get_search(hold_booking.project_unit_id)), class: "dropdown-item" %>
<% end %>
<% if !current_user.buyer? && policy([:admin, Receipt.new(user: user)]).direct? %>
  <%= link_to "Add Direct #{t('global.receipt')}", new_admin_user_receipt_path(user), class: "dropdown-item modal-remote-form-link" %>
<% end %>
<% if !current_user.buyer? && policy([:admin, Receipt.new(user: user)]).lost_receipt? %>
  <%= link_to "Add Lost Receipt", lost_receipt_admin_user_receipts_path(user), class: "dropdown-item modal-remote-form-link" %>
<% end %>
<% if policy([:admin, User.new]).confirm_via_otp? %>
  <%= link_to "Confirm via #{I18n.t("global.otp")}", confirm_via_otp_admin_user_path(user.id), class: "dropdown-item modal-remote-form-link" %>
<% end %>
<% if policy([:admin, User.new]).show? %>
  <%= link_to "View Details", admin_user_path(user.id), class: "dropdown-item" %>
<% end %>
<% if policy([:admin, User.new]).print? %>
  <%= link_to "Print", print_admin_user_path(user.id), class: "dropdown-item", target: "_blank" %>
<% end %>
<% if policy([:admin, User.new]).edit? %>
  <%= link_to "Edit", edit_admin_user_path(user.id), class: "dropdown-item modal-remote-form-link" %>
<% end %>
<% if policy([:admin, UserKyc.new]).index?(user) %>
  <%= link_to "View #{global_labels['user_kycs']}", admin_user_user_kycs_path(user_id: user.id), class: "dropdown-item" %>
<% end %>
<% if policy([:admin, UserKyc.new(user: user)]).new? %>
  <%= link_to "Add #{global_labels['user_kyc_details']}", new_admin_user_user_kyc_path(user), class: "dropdown-item modal-remote-form-link" %>
<% end %>
<% if policy([:admin, Note.new(notable: user)]).new? %>
  <%= link_to "Add #{global_labels[:note]}", new_notable_path(notable_type: user.class.model_name.i18n_key.to_s, notable_id: user.id), class: "dropdown-item modal-remote-form-link" %>
<% end %>
<% if !user.confirmed? && user.confirmation_token.present? %>
  <%= link_to 'Resend Confirmation Instructions', resend_confirmation_instructions_admin_user_path(user), class: "dropdown-item" %>
<% else %>
  <%= link_to 'Send Password Reset Instructions', resend_password_instructions_admin_user_path(user), class: "dropdown-item" %>
<% end %>
<% if policy([:admin, User.new]).update_password? %>
  <%= link_to "Update Password", update_password_admin_user_path(user), class: "dropdown-item modal-remote-form-link" %>
<% end %>
<% if policy([:admin, SyncLog.new]).resync? && user.sync_logs.present? %>
  <%= link_to "Resync", resync_admin_sync_log_path(user.sync_logs.desc(:created_at)[0]), class: 'dropdown-item' %>
<% end %>
