<% if policy([:admin, user]).block_lead? %>
  <%= link_to t('controller.users.block_lead.link_name'), block_lead_admin_user_path(user),
  class: "dropdown-item modal-remote-form-link" %>
<% end %>

<% if policy([:admin, user]).unblock_lead? %>
  <%= link_to t('controller.users.unblock_lead.link_name'), unblock_lead_admin_user_path(user), method: :patch,
  class: "dropdown-item" %>
<% end %>

<%# if policy([:admin, Crm::Base.new()]).choose_crm? && Crm::Api.where(resource_class: 'User').present? %>
  <%#= link_to t('controller.crms.choose_crm.link_name'), choose_crm_admin_crm_base_index_path(resource_id: user.id, resource_class: user.class), class: "dropdown-item " %>
<%# end %>

<% if policy([:admin, user]).confirm_via_otp? %>
  <%= link_to t('controller.users.confirm_via_otp.link_name'), confirm_via_otp_admin_user_path(user.id), class: "dropdown-item modal-remote-form-link" %>
<% end %>

<% if policy([:admin, user]).print? %>
  <%= link_to t('controller.users.print.link_name'), print_admin_user_path(user.id), class: "dropdown-item", target: "_blank" %>
<% end %>

<% if policy([:admin, user]).show? && action_name != 'show' %>
  <%= link_to t('controller.users.show.link_name', role: User.human_attribute_name("role.#{user.role}")), admin_user_path(user), class: "dropdown-item" %>
<% end %>

<% if policy([:admin, user]).edit? %>
  <%= link_to t('controller.users.edit.link_name', role: User.human_attribute_name("role.#{user.role}")), edit_admin_user_path(user.id), class: "dropdown-item modal-remote-form-link" %>
<% end %>

<% if user.buyer? && policy([:admin, Lead]).index? %>
  <%= link_to t('controller.users.leads.link_name'), admin_user_leads_path(user.id), class: 'dropdown-item' %>
<% end %>

<% if policy([:admin, Note.new(notable: user)]).new? %>
  <%= link_to t('helpers.new.link_name', model: Note.model_name.human), new_notable_path(notable_type: user.class.model_name.i18n_key.to_s, notable_id: user.id), class: "dropdown-item modal-remote-form-link" %>
<% end %>

<% if !user.confirmed? && user.confirmation_token.present? %>
  <%= link_to t('controller.users.resend_confirmation_instructions.link_name'), resend_confirmation_instructions_admin_user_path(user), class: "dropdown-item" %>
<% else %>
  <%= link_to t('controller.users.resend_password_instructions.link_name'), resend_password_instructions_admin_user_path(user), class: "dropdown-item" %>
  <% if policy([:admin, user]).send_payment_link? %>
    <%# link_to 'Send Payment link', send_payment_link_admin_user_path(user), class: "dropdown-item" %>
  <% end %>
<% end %>

<% if policy([:admin, user]).update_password? %>
  <%= link_to t('controller.users.change_password.link_name'), update_password_admin_user_path(user), class: "dropdown-item modal-remote-form-link" %>
<% end %>

<% if policy([:admin, user]).asset_create? %>
  <%= link_to Asset.model_name.human(count: 2), admin_user_path(user,'remote-state': assetables_path(assetable_type: user.class.model_name.i18n_key.to_s, assetable_id: user.id) ), class: "dropdown-item" %>
<% end %>

<% if policy([:admin, user]).show_selldo_links? %>
  <h6 class="dropdown-header"><%= t("selldo.links.header") %></h6>
  <% %w(add_note schedule_site_visit schedule_followup).each do |task| %>
    <%= link_to t("selldo.links.#{task}"), "#{ENV_CONFIG['selldo']['base_url']}/client/0/#{current_client.selldo_default_search_list_id}/#{user.lead_id}/f/#{task.camelcase}", target: '_blank', class: 'dropdown-item' %>
  <% end %>
<% end %>
