<% if @user.errors.present? %>
  <div class="alert alert-danger">
    <ul>
      <% @user.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>
<%= form_for [:admin, @user] do |f| %>
<div class="form-group">
  <%= f.label :name, class: 'control-label label-required' %>
  <%= f.text_field :name, class: 'form-control', autofocus: true, required: 'required', disabled: (policy(@user).editable_field?("name") ? false : true) %>
</div>
<div class="form-group">
  <%= f.label :email, class: 'control-label label-required' %>
  <%= f.email_field :email, class: 'form-control', required: 'required', disabled: (policy(@user).editable_field?("email") ? false : true) %>
</div>
<div class="form-group">
  <%= f.label :phone, class: 'control-label label-required' %><br/>
  <%= f.text_field :phone, class: 'form-control phone w-100', required: 'required', disabled: (policy(@user).editable_field?("phone") ? false : true), style: 'width: 100%;' %>
</div>
<div class="form-group">
  <%= f.label :role, class: 'control-label label-required' %>
  <%= f.select :role, User.available_roles.reject{|r| r[:id] == 'user'}.collect{|r| [r[:text], r[:id]] }, {prompt: true}, class: 'form-control', required: 'required', disabled: (policy(@user).editable_field?("role") ? false : true) %>
</div>
<%= f.submit :save, class: 'btn btn-primary' %>
<% end %>
<%= javascript_tag do %>
$(document).ready(function(){
  FormInitializer.init($("#new_user"));
});
<% end %>
