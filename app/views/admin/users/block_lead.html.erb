<%= form_for [:admin, @user], remote: true, local: true, html: {id: "block_lead_form", class: "modal-remote-form validate-form", "data-resource-type": global_labels['user'], "data-type": "json"} do |f| %>
  <div class="modal fade right fixed-header-footer" role="dialog" id="modal-remote-form-inner">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header bg-gradient-cd white">
          <h3 class="title">
            <%= t("controller.users.#{action_name}.header") %>
          </h3>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <%= f.hidden_field :iris_confirmation, value: true %>
            <div class='col-md-12'>
              <%= f.check_box :temporarily_blocked %>
              <%= f.label :temporarily_blocked, class: 'control-label' %>
            </div>
            <div class = 'col-md-12 pt-3'>
              <div class="mb-3">
                <%= f.label (f.object.role == 'channel_partner' ? :manager_id_channel_partner : :manager_id), class: 'label-required' %>
                <%= f.select :manager_id, options_from_collection_for_select(@referenced_managers, 'id', 'name', f.object.manager_id),{prompt: true}, class: 'selectize', disabled: !(policy([current_user_role_group, @user]).editable_field?("manager_id")), required: true %>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <%= f.submit "Save", class: 'btn btn-primary', disabled: true %>
        </div>
      </div>
    </div>
  </div>
<% end %>
<%= javascript_tag do %>
  $(document).ready(function(){
    FormInitializer.init($("#block_lead_form"));
    var notice = <%= raw (params.dig("notice")||"").to_json %>
    if(notice){
      Amura.global_success_handler(notice)
    }
    $("#user_temporarily_blocked").change(function(){
      if($(this).is(":checked")){
        $("#block_lead_form").find('[type="submit"]').removeAttr("disabled");
      }else{
        $("#block_lead_form").find('[type="submit"]').attr("disabled", "disabled");
      }
    });
  });
<% end %>
