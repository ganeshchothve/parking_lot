<table class='table my-customer-table responsive-tbl'>
  <thead class="th-default">
    <thead>
      <tr class="bg-gradient-cd white">
        <th><%= User.human_attribute_name('name_email_phone') %></th>
        <% if Crm::Base.where(domain: ENV_CONFIG.dig(:selldo, :base_url)).present? %>
          <th><%= Lead.human_attribute_name('lead_id') %></th>
        <% end %>
        <th><%= t('mongoid.attributes.lead.stage') %></th>
        <th><%= Lead.human_attribute_name('project_id') %></th>
        <th><%= t('mongoid.attributes.lead.blocking_amount_paid') %></th>
        <th><%= t('mongoid.attributes.lead.payment_done') %></th>
        <th><%= t('mongoid.attributes.lead.registration_done') %></th>
        <th class="text-right"><%= t('global.action', count: 3) %></th>
      </tr>
    </thead>
  </thead>
  <tbody>
    <% leads.each do |lead| %>
      <tr>
        <td data-title="Name">
          <span>
            <% if policy([ current_user_role_group, lead]).show? %>
              <%= link_to lead.name, [current_user_role_group, lead ] %>
            <% else %>
              <%= lead.name %>
            <% end %>
          </span>
          <% if lead.email.present? %>
            <span class="email-icon small">
              <%= lead.email || "" %>
            </span>
          <% end %>
          <% if lead.phone.present? %>
            <span class="phone-icon small">
              <%= lead.phone || "" %>
            </span>
          <% end %>
          <% if lead.manager_id? && current_user.role.in?(%w(admin superadmin)) %>
            <small>
              <%= "#{t('mongoid.attributes.lead.manager_id')} : #{link_to lead.manager_name, [current_user_role_group, lead.manager]}".html_safe %>
            </small>
          <% end %>
        </td>

        <% if Crm::Base.where(domain: ENV_CONFIG.dig(:selldo, :base_url)).present? %>
          <td data-title="<%= t('mongoid.attributes.lead.lead_id') %>"><span><%= lead.lead_id %></span></td>
        <% end %>

        <td data-title="<%= t('mongoid.attributes.lead.stage') %>"><span><%= lead.lead_stage || '-' %></span></td>

        <td data-title="<%= Lead.human_attribute_name('project_id') %>"><span><%= lead.project_name %></span></td>

        <td data-title="<%= t('mongoid.attributes.lead.blocking_amount_paid') %>">
          <span><%= t("global.boolean.#{lead.is_blocking_amount_paid? }") %></span>
        </td>

        <td data-title="<%= t('mongoid.attributes.lead.payment_done') %>">
          <span><%= t("global.boolean.#{lead.is_booking_price_paid? }") %></span>
        </td>

         <td data-title="<%= t('mongoid.attributes.lead.registration_done') %>">
          <span><%= t("global.boolean.#{lead.is_registration_done? }") %></span>
        </td>

        <td>
          <div class="dropdown show text-right">
            <a class="btn dropdown-toggle table-dropdown-btn black-clr" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span></span><span></span><span></span></a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
              <%= render "#{current_user_role_group}/leads/links", lead: lead %>
            </div>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<% if leads.is_a?(WillPaginate::Collection) %>
  <div class="col-lg-12 col-xs-12 col-md-12 col-sm-12 pt-2">
    <%= will_paginate leads, list_classes: %w(pagination justify-content-center) %>
  </div>
<% end %>
