<section class="mt-0">
  <div class="px-0">
    <div class="row g-0">
        <div class="col-lg-12 p-0">
          <% leads.each do |lead| %>
          <div class="white rounded-3 float-start wd-100 mt-4 shadow-sm position-relative">
            <div class="float-start wd-100">
              <div class="d-flex justify-content-between">
                <div>
                  <div class="inner-info">
                    <div class="text-center float-start letter-sort-nm bg-primary-light">
                      <span class="position-absolute top-50 start-50 translate-middle primary fn-24 font-medium">SM</span>
                    </div>
                    <div class="ps-3 py-3 float-start">
                    <h2 class="fn-18 font-normal">
                      <% if policy([ current_user_role_group, lead]).show? %>
                        <%= link_to lead.name, [current_user_role_group, lead ], class: "primary" %>
                      <% else %>
                        <%= lead.name %>
                      <% end %>
                    </h2>
                    <% if lead.email.present? %>
                    <p class="fn-14 mt-1 mb-1">
                      <i class="fa fa-envelope fill-theme-light me-2"></i><%= lead.email || "" %>
                    </p>
                    <% end %>
                    <% if lead.phone.present? %>
                    <p class="fn-14 mt-1 mb-0">
                      <i class="fa fa-phone-alt fill-theme-light me-2"></i><%= lead.phone || "" %>
                    </p>
                    <% end %>
                    <% if lead.manager_id? && current_user.role.in?(%w(admin superadmin)) %>
                      <p class="fn-14 mt-1 mb-0">
                        <%= "#{t('mongoid.attributes.lead.manager_id')} : #{link_to lead.manager_name, [current_user_role_group, lead.manager], class: 'primary'}".html_safe %>
                      </p>
                    <% end %>
                  </div>
                  </div>
                </div>
                <div>
                  <div class="row ht-inner-col-150">

                    <div class="col border-start py-3 px-3 wd-150 position-relative">
                      <div class="position-absolute top-50 start-50 translate-middle w-75">
                      <p class="font-medium fn-14 mb-0"><%= lead.lead_stage || '-' %></p>
                      <p class="fn-12 mb-0"><%= t('mongoid.attributes.lead.stage') %></p>
                      </div>
                    </div>

                    <div class="col border-start py-3 px-3 wd-150 position-relative">
                      <div class="position-absolute top-50 start-50 translate-middle w-75">
                      <p class="font-medium fn-14 mb-0"><%= lead.project_name %></p>
                      <p class="fn-12 mb-0"><%= Lead.human_attribute_name('project_id') %></p>
                      </div>
                    </div>

                    <div class="col border-start py-3 px-3 wd-150 position-relative">
                      <div class="position-absolute top-50 start-50 translate-middle w-75">
                      <p class="font-medium fn-14 mb-0"><%= t("global.boolean.#{lead.is_blocking_amount_paid? }") %></p>
                      <p class="fn-12 mb-0"><%= t('mongoid.attributes.lead.blocking_amount_paid') %></p>
                      </div>
                    </div>

                    <div class="col border-start py-3 px-3 wd-150 position-relative">
                      <div class="position-absolute top-50 start-50 translate-middle w-75">
                      <p class="font-medium fn-14 mb-0"><%= t("global.boolean.#{lead.is_booking_price_paid? }") %></p>
                      <p class="fn-12 mb-0"><%= t('mongoid.attributes.lead.payment_done') %></p>
                      </div>
                    </div>

                    <div class="col border-start py-3 px-3 wd-150 position-relative">
                      <div class="position-absolute top-50 start-50 translate-middle w-75">
                      <p class="font-medium fn-14 mb-0"><%= t("global.boolean.#{lead.is_registration_done? }") %></p>
                      <p class="fn-12 mb-0"><%= t('mongoid.attributes.lead.registration_done') %></p>
                      </div>
                    </div>

                  </div>
                </div>
            </div>
            </div>
            <div class="position-absolute custom-top-10 custom-end-20">
              <div class="dropdown">
                <a href="javascript:void(0);" id="dropdownMenuLink" data-bs-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <i class="fa fa-ellipsis-v primary" aria-hidden="true"></i></a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
                  <%= render "#{current_user_role_group}/leads/links", lead: lead %>
                </div>
              </div>
            </div>
          </div>
            
            <% end %>
          </div>

        <!----------- Pagination ---------->
        <div class="col-lg-12 py-3 white mb-2 px-3 mt-3 shadow-sm">
          <div class="row">
            <div class="col-lg-6 pt-2">
              <p class="table-entry mb-0">Showing 1 - 5 of <%= @leads.total_entries %> items</p>
            </div>
            <div class="col-lg-6 table-pagination">
              <%= will_paginate leads, list_classes: %w(pagination justify-content-end) %>
            </div>
          </div>
        </div>
      </div>
    </div>
</section>