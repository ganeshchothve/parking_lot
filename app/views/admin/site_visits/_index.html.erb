<table class='table my-customer-table responsive-tbl caption-top rounded mt-2 mb-0'>
  <thead class="th-default">
    <thead>
      <tr class="bg-primary white">
        <th><%= t('mongoid.attributes.site_visit.lead') %></th>
        <th><%= t('mongoid.attributes.lead.email') %></th>
        <th><%= t('mongoid.attributes.lead.phone') %></th>
        <th><%= t('mongoid.attributes.site_visit.project') %></th>
        <th><%= t('mongoid.attributes.site_visit.scheduled_on') %></th>
        <th><%= t('mongoid.attributes.site_visit.status') %></th>
        <th><%= t('mongoid.attributes.site_visit.approval_status') %></th>
        <th class="text-right"><%= t('global.action', count: 3) %></th>
      </tr>
    </thead>
  </thead>
  <tbody>
    <% site_visits.reject(&:new_record?).each do |site_visit| %>
      <tr>
        <td data-title=<%= t('mongoid.attributes.site_visit.lead') %>>
          <% if policy([:admin, Lead.new()]).show? %>
            <%= link_to site_visit.lead.name, admin_lead_path(site_visit.lead_id) %>
          <% else %>
            <%= site_visit.lead.name %>
          <% end %>
        </td>
        <td data-title=<%= t('mongoid.attributes.lead.email') %>>
          <%= site_visit.lead.email %>
        </td>
        <td data-title=<%= t('mongoid.attributes.lead.phone') %>>
          <%= site_visit.lead.phone %>
        </td>
        <td data-title=<%= t('mongoid.attributes.site_visit.project') %>>
          <% if policy([:admin, Project.new]).show? %>
            <%= link_to site_visit.project.name, admin_project_path(site_visit.project_id) %>
          <% else %>
            <%= site_visit.project.name %>
          <% end %>
        </td>
        <td data-title=<%= t('mongoid.attributes.site_visit.scheduled_on') %>>
          <% if policy([:admin, site_visit]).show? %>
            <%= link_to site_visit.scheduled_on.strftime("%d %b %Y %I:%M %p"), admin_site_visit_path(site_visit), class: 'text-primary' %>
          <% else %>
            <%= site_visit.scheduled_on.strftime("%d %b %Y %I:%M %p") rescue "" %>
          <% end %>
        </td>
        <td data-title=<%= t('mongoid.attributes.site_visit.status') %>>
            <%= site_visit.status&.titleize %>
        </td>
        <td data-title=<%= t('mongoid.attributes.site_visit.approval_status') %>>
            <%= site_visit.approval_status&.titleize %>
        </td>
        <td>
          <div class="dropdown show text-right">
          <a class="btn dropdown-toggle table-dropdown-btn black-clr" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span></span><span></span><span></span></a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
              <%= render 'links', site_visit: site_visit %>
           </div>
        </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="col-lg-12 py-3 bg-white mb-2 px-2">
  <div class="row">
    <div class="col-lg-6 pt-2">
      <p class="table-entry mb-0"><%= page_entries_info site_visits %></p>
    </div>
    <% if site_visits.respond_to?(:total_pages) %>
      <div class="col-lg-6 table-pagination">
        <%= will_paginate site_visits, list_classes: %w(pagination justify-content-end) %>
      </div>
    <% end %>
  </div>
</div>
