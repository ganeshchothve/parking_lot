<table class='table my-customer-table responsive-tbl table-color'>
  <thead class="th-default">
    <thead>
      <tr class="bg-primary white">
        <th><%= t('mongoid.attributes.user.name_email_phone') %></th>
        <% if current_client.selldo_client_id.present? && current_client.selldo_gre_form_id.present? && current_client.selldo_channel_partner_form_id.present? %>
          <th><%= t('mongoid.attributes.lead_manager.selldo_lead_id') %></th>
        <% end %>
        <th><%= t('mongoid.attributes.lead_manager.project_id') %></th>
        <% if !current_user.role?('channel_partner') %>
          <th><%= t('mongoid.attributes.lead_manager.channel_partner') %></th>
        <% end %>
        <th><%= t('mongoid.attributes.lead_manager.count_status') %></th>
        <th><%= t('mongoid.attributes.lead_manager.lead_status') %></th>
        <th><%= t('mongoid.attributes.lead_manager.registered_at') %></th>
        <th><%= t('mongoid.attributes.lead_manager.expiry_date') %></th>
        <th><%= t('mongoid.attributes.lead_manager.expiry_remaining_days') %></th>
        <th><%= t('mongoid.attributes.lead_manager.can_extend_validity') %></th>
        <th  class="btn-action"><%= t('global.action', count: 3) %></th>
      </tr>
    </thead>
  </thead>
  <tbody>
    <% lead_managers.each do |lead_manager| %>
    <tr>
      <%
        lead = lead_manager.lead
      %>
      <tr>
        <td data-title="Name">
          <span>
            <%= link_to lead.name, admin_lead_manager_path(lead_manager), target: '_blank' %>
          </span>
          <% if lead.email.present? %>
            <span class="email-icon small">
              <%= lead.email || "" %>
            </span>
          <% end %>
          <% if lead.phone.present? %>
            <span class="phone-icon small">
              <%= lead.phone || "" %>
            </span>
          <% end %>
        </td>
        <% if current_client.selldo_client_id.present? && current_client.selldo_gre_form_id.present? && current_client.selldo_channel_partner_form_id.present? %>
          <td data-title="CRM Lead Id"><span><%= lead.lead_id %></span></td>
        <% end %>
        <td><%= lead.project.try(:name) %></td>
        <% if !current_user.role?('channel_partner') %>
          <td><%= lead_manager.manager_name %></td>
        <% end %>
      <td><%= lead_manager.count_status.try(:titleize) %></td>
      <td><%= lead_manager.lead_status.try(:titleize) %></td>
      <td><%= lead_manager.registered_at.try(:strftime, "%d/%m/%Y") %></td>
      <td><%= lead_manager.expiry_date.try(:strftime, "%d/%m/%Y") %></td>
      <td><%= lead_manager.lead_validity_period %></td>
      <td class="text-center"><%= lead_manager.can_extend_validity? ? 'Yes' : 'No' %></td>
      <td>
        <div class="dropdown show text-right">
            <a class="btn dropdown-toggle table-dropdown-btn black-clr" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span></span><span></span><span></span></a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuLink">
              <%= render "#{current_user_role_group}/lead_managers/links", lead_manager: lead_manager %>
            </div>
          </div>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
<div class="col-lg-12 col-xs-12 col-md-12 col-sm-12 pb-2">
  <%= will_paginate lead_managers, list_classes: %w(pagination justify-content-center) %>
</div>
