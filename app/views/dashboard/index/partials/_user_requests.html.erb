<% if current_client.enable_actual_inventory? %>
  <% user_requests = DashboardDataProvider.cancellation_user_requests_dashboard(current_user) %>
  <div class="card">
    <div class="card-header">
      <%= global_labels[:user_requests] %>
    </div>
    <div class="card-body">
      <% if user_requests.present? %>
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>Status</th>
                <th class="text-right">Count</th>
                <th class="text-right">Total Agreement Price</th>
                <th class="text-right">Total All Inclusive Price</th>
              </tr>
            </thead>
            <tbody>
              <% user_requests.each do |d| %>
              <tr>
                <td><%= UserRequest.available_statuses.find{|x| x[:id] == d[:status]}[:text] %></td>
                <td class="text-right"><%= d[:count] %></td>
                <td class="text-right"><%= number_to_indian_currency(d[:total_agreement_price]) %></td>
                <td class="text-right"><%= number_to_indian_currency(d[:total_all_inclusive_price]) %></td>
              </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        No <%= global_labels[:user_requests] %> yet.
      <% end %>
    </div>
  </div>
<% end %>
