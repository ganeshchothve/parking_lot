<% if current_client.enable_actual_inventory?(current_user) %>
  <% user_requests = DashboardDataProvider.user_requests_dashboard(current_user, params[:user_request_fltrs]) %>
  <div class="card box-card mb-3 border-0">
    <a data-toggle="collapse" href="#dashboard_user_requests" role="button" aria-expanded="false" aria-controls="dashboard_user_requests" class='font-weight-bold text-decoration-none'>
      <div class="card-header box-header border-0">
        <h2 class="text-dark">
          <%= image_tag "file-spreadsheet-black.svg", alt: 'User requests' %>
          <%= UserRequest.model_name.human(count: 3) %>
        </h2>
        <%= link_to 'View All', admin_user_requests_path(:all), class: 'view-all-btn' %>
      </div>
    </a>
    <div class="card-body collapse box-content br-rd-bl-4 bg-white p-0" id='dashboard_user_requests'>
      <% if user_requests.present? %>
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr class="bg-primary white">
                <th>Type</th>
                <th>Status</th>
                <th class="text-right">Count</th>
              </tr>
            </thead>
            <tbody>
              <% user_requests.each do |d| %>
              <tr>
                <td><%= d[:_type].split("::").last.titleize %></td>
                <td><%= t("mongoid.attributes.user_request/status.#{d[:status]}") %></td>
                <td class="text-right">
                  <%= link_to d[:count], [current_user_role_group, UserRequest, {request_type: 'user_request', fltrs: { status: d[:status], _type: d[:_type] } }], target: "_blank", title: "View #{d[:count]} #{ t("mongoid.attributes.user_request/status.#{d[:status]}") } #{d[:_type].split("::").last.titleize} requests." %>
                </td>
              </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        No <%= global_labels[:user_requests] %> yet.
      <% end %>
    </div>
  </div>
<% end %>
