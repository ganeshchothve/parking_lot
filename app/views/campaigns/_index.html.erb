<% campaigns.each do |campaign| %>
<div class="card mb-3 p-3 mt-3">
  <div class="row g-1">
    <div class="col-md-6">
      <h6 class="card-title d-inline fn-16 me-2">
        <% if current_user.buyer? && Buyer::CampaignPolicy.new(current_user, campaign).show? %>
        <%= link_to campaign.name, buyer_campaign_path(campaign), class: 'theme-txt-color d-inline-block' %>
        <% elsif Admin::CampaignPolicy.new(current_user, campaign).show? %>
        <%= link_to campaign.name, admin_campaign_path(campaign), class: 'theme-txt-color d-inline-block' %>
        <% end %>
        <%= I18n.t("mongoid.attributes.campaign/statuses.#{campaign.status}") %>
        <%
      </h6>
      <span class="badge bg-warning-light font-normal text-warning fn-14">Not yet started</span>
      <span class="badge bg-danger-light font-normal text-danger fn-14">Paused</span>
    </div>
    <div class="col-md-6 text-end mt-0 mb-2">
      <%# <span class="theme-txt-color fn-14 ms-2">
                        Campaign Manager: Rajeev Thakkar
                    </span> %>
      <a class="btn table-dropdown-btn" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false"><i class="fa fa-ellipsis-v" aria-hidden="true"></i></a>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
        <% if current_user.buyer? && Buyer::CampaignPolicy.new(current_user, campaign).edit? %>
        <%= link_to t('helpers.edit.link_name', model: Campaign.model_name.human), edit_buyer_campaign_path(campaign), class: 'dropdown-item modal-remote-form-link', data:{event_category: 'Section', event_action: 'Click', event_name: 'Edit Campaign'} %>
        <% elsif Admin::CampaignPolicy.new(current_user, campaign).edit? %>
        <%= link_to t('helpers.edit.link_name', model: Campaign.model_name.human), edit_admin_campaign_path(campaign), class: 'dropdown-item modal-remote-form-link', data:{event_category: 'Section', event_action: 'Click', event_name: 'Edit Campaign'} %>
        <% end %>
        <% if current_user.buyer? && Buyer::CampaignPolicy.new(current_user, campaign).show? %>
        <%= link_to t('helpers.show.link_name', model: Campaign.model_name.human), buyer_campaign_path(campaign), class: 'dropdown-item', data:{event_category: 'Section', event_action: 'Click', event_name: 'Campaign details'} %>
        <% elsif Admin::CampaignPolicy.new(current_user, campaign).show? %>
        <%= link_to t('helpers.show.link_name', model: Campaign.model_name.human), admin_campaign_path(campaign), class: 'dropdown-item', data:{event_category: 'Section', event_action: 'Click', event_name: 'Campaign details'} %>
        <% end %>
      </div>
    </div>
    <% if campaign.projects.present? %>
    <% campaign.projects.each do |project| %>
    <div class="border rounded row p-2 ms-1 me-3 mb-2">
      <div class="col-md-auto px-0">
        <img src="<%= asset_path 'Celestial-City.jpg' %>" class="img-fluid rounded" width="150" alt="">
      </div>
      <div class="col-md-10 px-0 row">
        <div class="col-md-5">
          <div class="card-body py-0 mt-2">
            <h6 class="card-title"><%= project.name %></h6>
            <p class="card-text"><%= project.developer_name %></p>
            <p class="card-text"><i class="fa fa-map-marker-alt fill-theme me-1"></i>
              <small class="text-muted"><%= project.address.to_s %></small>
            </p>
          </div>
        </div>
        <!--<div class="col-md-7 px-0">
          <ul class="list-unstyled row gx-1 col-9 float-end mt-1 border-start ps-3 mb-0">
            <li class="col-6">
              <p class="mb-2 fn-14"><i class="fa fa-star fa-xs fill-warning me-2"></i>Good Location</p>
            </li>
            <li class="col-6">
              <p class="mb-2 fn-14"><i class="fa fa-star fa-xs fill-warning me-2"></i>State of the art
                Amenities</p>
            </li>
            <li class="col-6">
              <p class="mb-2 fn-14"><i class="fa fa-star fa-xs fill-warning me-2"></i>Reputed Developer</p>
            </li>
            <li class="col-6">
              <p class="mb-2 fn-14"><i class="fa fa-star fa-xs fill-warning me-2"></i>Bank Offers</p>
            </li>
            <li class="col-6">
              <p class="mb-2 fn-14"><i class="fa fa-star fa-xs fill-warning me-2"></i>Affordable</p>
            </li>
            <li class="col-6">
              <p class="mb-2 fn-14"><i class="fa fa-star fa-xs fill-warning me-2"></i>Popular among partners
              </p>
            </li>
          </ul>
        </div>-->
      </div>
    </div>
    <% end %>
    <% else %>
    -
    <% end %>

    <div class="col-lg-12 mt-2">
      <div class="row">
        <div class="col-md-3">
          <span><i class="fa fa-clock fill-theme-light me-1"></i><%
            start_date_str = if campaign.start_date.future?
              "#{(campaign.start_date - Date.today).to_i} days to start"
            elsif campaign.status == 'live' || campaign.status == 'paused'
              "Started #{campaign.start_date}"
            else
              "#{campaign.start_date}"
            end
          %>
        <%= start_date_str %></span>
        </div>
        <div class="col-md-9">
          <div class="row float-end col-12">
            <div class="col">
              <span><i class="fa far fa-dollar-sign fill-success me-2"></i>Rs. <%= campaign.total_invested_amount %> raised</span>
            </div>
            <div class="col-md-8 px-0">
              <div class="progress mb-0 height-05 mt-2">
                <div class="progress-bar progress-bar-animated bg-success" role="progressbar" style="width:0%"
                  aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            <div class="col-md-auto text-end">
              <span><i class="fa fal fa-bullseye-arrow fill-danger me-2"></i>Rs. <%= campaign.total_budget %></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<% end %>
 <!----------- Pagination ---------->
<div class="col-lg-12 py-3 bg-white mb-5 px-3 mt-3 shadow-sm">
  <div class="row">
    <div class="col-lg-6 pt-2">
      <p class="table-entry mb-0">Showing 1 - 5 of <%= @campaigns.total_entries %> items</p>
    </div>
    <div class="col-lg-6 table-pagination">
      <%= will_paginate campaigns, list_classes: %w(pagination justify-content-end) %>
    </div>
  </div>
</div>