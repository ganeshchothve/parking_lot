<% if booking_detail.hold? && policy([:buyer, booking_detail]).block? && booking_detail.search %>
  <%= link_to t('controller.booking_details.continue_booking.link_name'), checkout_user_search_path(booking_detail.search), class: 'dropdown-item' %>
<% end %>

<% if policy([:buyer, BookingDetail ]).show? && !current_page?(request.url) %>
  <%= link_to t('helpers.show.link_name', model: BookingDetail.model_name.human ), buyer_booking_detail_path( booking_detail), class: 'dropdown-item' %>
<% end %>

<% if policy([:buyer, Receipt.new(user: current_user, booking_detail: booking_detail, lead: current_user.selected_lead)]).new? %>
  <%= link_to t('controller.booking_details.receipts.new.link_name'), new_buyer_booking_detail_receipt_path(booking_detail_id: booking_detail.id), class: 'dropdown-item modal-remote-form-link' %>
<% end %>

<%= link_to t('controller.assets.index.link_name'), doc_buyer_booking_detail_path(id: booking_detail.id, type: 'documents'), class: "dropdown-item modal-remote-form-link" %>

  <%= link_to t('controller.booking_details.cost_sheet.link_name'), doc_buyer_booking_detail_path(id: booking_detail.id, type: 'cost_sheet'), class: "dropdown-item modal-remote-form-link" %>

  <%= link_to t('controller.booking_details.payment_schedule.link_name'), doc_buyer_booking_detail_path(id: booking_detail.id, type: 'payment_schedule'), class: "dropdown-item modal-remote-form-link" %>

<% if policy([:buyer, Receipt]).index? %>
  <%= link_to t('controller.receipts.index.link_name'), buyer_booking_detail_receipts_path(booking_detail), class: 'dropdown-item' %>
<% end %>

<% if policy([current_user_role_group, booking_detail]).generate_booking_detail_form? %>
  <%= link_to t('booking_details.links.print_booking_form'), generate_booking_detail_form_buyer_booking_detail_path(booking_detail), class: 'dropdown-item', target: '_blank' %>
<% end %>

<% [UserRequest::Cancellation, UserRequest::Swap] if Rails.env.development? %>
<% UserRequest.descendants.each do |klass| %>
  <% if policy([:buyer, klass.new(user_id: booking_detail.user_id, requestable_id: booking_detail.id, requestable_type: 'BookingDetail')]).new? %>
    <%= link_to t("controller.user_requests.#{klass.model_name.element}.new.link_name"), new_buyer_user_request_path(requestable_id: booking_detail.id, request_type: klass.model_name.element, requestable_type: 'BookingDetail'), class: "dropdown-item modal-remote-form-link" %>
  <% end %>
<% end %>
